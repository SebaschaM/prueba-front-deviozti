import{d as L,r as u,a as $,j as e,B as R,R as U,i as Q,L as W,Q as A,k as q}from"./index-g7zPiIaF.js";import{A as V,S as J}from"./index.esm-s96I5nnh.js";import{u as G}from"./usePagination-UfZjzkBO.js";const K=({dataPage:N,toast:m})=>{var j;const{handleUpdateHero:t}=L(),[r,I]=u.useState(),{register:v,handleSubmit:D,setValue:z}=$(),[S,b]=u.useState(!1),[a,g]=u.useState([]),T=(f,h)=>{var x;const p=(x=f.target.files)==null?void 0:x[0];if(!p)return;const P=s=>{g(c=>{const d=[...c];return d[h]=s,d}),z("image",p)},w=new FileReader;w.onloadend=()=>P(w.result),w.onerror=()=>console.error("Error reading the file"),w.readAsDataURL(p)},y=async f=>{b(!0),b(!1);const h=new FormData,p={...f,image:(f==null?void 0:f.image)||(r==null?void 0:r.image)},{title:P,description:w,image:x}=p;h.append("hero[title]",P),h.append("hero[description]",w),x instanceof File?h.append("heroImage_0",x):typeof x=="string"&&h.append("hero[image]",x);try{h.append("sectionName","hero");const{response:s,ok:c}=await t(h);c&&(m.success("Se actualizaron los datos con éxito"),b(!1),I(s.data))}catch{m.error("Ocurrió un error al actualizar"),b(!1)}};return u.useEffect(()=>{I(N.hero)},[]),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("h3",{className:"text-3xl font-bold",children:"Hero"}),e.jsx("div",{className:"flex flex-col gap-4",children:e.jsxs("form",{className:"flex flex-col gap-4",encType:"multipart/form-data",onSubmit:D(y),children:[e.jsx("div",{className:"flex flex-wrap gap-4 overflow-x-auto",children:e.jsxs("table",{className:"min-w-full overflow-hidden divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-center text-gray-500 uppercase",children:"Banner"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-center text-gray-500 uppercase",children:"Titulo"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-center text-gray-500 uppercase",children:"Descripción"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r&&r.title&&e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap w-32! ",children:e.jsxs("div",{className:"relative flex flex-col items-center w-32",children:[e.jsxs("label",{htmlFor:"dropzone-file-banners-about",className:"flex flex-col items-center justify-center w-32 overflow-hidden border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center h-20 pt-5 pb-6",children:[e.jsx(V,{size:40}),e.jsx("p",{className:"mb-2 text-sm text-gray-500",children:"Subir icono"})]}),e.jsx("input",{id:"dropzone-file-banners-about",type:"file",className:"hidden",accept:"image/*",onChange:f=>T(f,0)}),a[0]&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center w-32 h-20",children:a[0].includes("video")?e.jsx("video",{src:a[0],className:"w-full h-20 bg-white object-content",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,preload:"metadata"}):e.jsx("img",{src:a[0],alt:"imagePreview",className:"w-full h-full bg-white rounded-lg object-content"})})]}),!a[0]&&e.jsx("div",{className:"absolute w-32 h-20 pointer-events-none object-content",children:(j=r==null?void 0:r.image)!=null&&j.includes("mp4")?e.jsx("video",{src:r.image,className:"w-full h-20 bg-white object-content",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,preload:"metadata"}):e.jsx("img",{src:r==null?void 0:r.image,alt:"imagePreview",className:"w-full h-full bg-white rounded-lg object-content"})})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap w-32!",children:e.jsx("input",{type:"text",placeholder:"Titulo",className:"bg-gray-50 w-32 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5",defaultValue:r==null?void 0:r.title,...v("title")})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap w-32!",children:e.jsx("input",{type:"text",placeholder:"Descripción",className:"bg-gray-50 w-32 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5",defaultValue:r==null?void 0:r.description,...v("description")})})]})})]})}),e.jsx("button",{className:"px-4 py-2 font-bold text-white transition-all duration-300 bg-blue-500 rounded w-fit hover:bg-blue-700 disabled:bg-gray-400",type:"submit",disabled:S,children:S?e.jsx("l-ring",{size:"19",speed:"2",color:"white",stroke:4}):"Guardar cambios"})]})})]})},M=({dataPage:N,toast:m})=>{var H,O;const[t,r]=u.useState({}),{handleUpdateContact:I}=L(),{register:v,handleSubmit:D,setValue:z,reset:S}=$(),[b,a]=u.useState(!1),[g,T]=u.useState([]),[y,j]=u.useState({icon:"",link:"",type_link:""}),{currentPage:f,totalPages:h,currentItems:p,indexOfFirstItem:P,handlePageChange:w}=G(Array.isArray(t==null?void 0:t.cards)?t==null?void 0:t.cards:[]),x=({sectionIndex:l,fieldName:n})=>`contact[cards][${l}].${n}`,s=()=>{j({icon:"",link:"",type_link:""}),T([])},c=(l,n)=>{const i=l.target.files[0];if(i){const o=new FileReader;o.onloadend=()=>{T(_=>{const F=[..._];return F[n]=o.result,F}),(_=>{var F;n===((F=t==null?void 0:t.cards)==null?void 0:F.length)?j(C=>({...C,icon:_})):z(x({sectionIndex:n,fieldName:"icon"}),_)})(i)},o.readAsDataURL(i)}},d=async l=>{a(!0);const n=new FormData,i={title:l.contact.title||(t==null?void 0:t.title)||"",cards:[]};l.contact.cards&&l.contact.cards.length>0?i.cards=l.contact.cards.map((o,k)=>{var _,F;return{...o,icon:o.icon||((F=(_=t==null?void 0:t.cards)==null?void 0:_[k])==null?void 0:F.icon)}}):i.cards=[...t.cards],y.icon!==""&&y.link!==""&&y.type_link!==""&&i.cards.push({...y}),n.append("contact[title]",i.title),i.cards.forEach((o,k)=>{n.append(`contact[cards][${k}][link]`,o.link),n.append(`contact[cards][${k}][type_link]`,o.type_link),o.icon instanceof File?n.append(`cardIcon_${k}`,o.icon):typeof o.icon=="string"&&n.append(`contact[cards][${k}][icon]`,o.icon)});try{n.append("sectionName","contact");const{ok:o,response:k}=await I(n);o&&(m.success("Se actualizaron las características con éxito"),a(!1),r(k.data),s())}catch{m.error("Ocurrió un error al actualizar las características"),a(!1)}},E=async l=>{try{const n=t==null?void 0:t.cards.filter(o=>o._id!==l),i={title:t==null?void 0:t.title,cards:n};r(i),await d(i)}catch{m.error("Ocurrió un error al eliminar la característica")}};return u.useEffect(()=>{r(N.contact)},[]),u.useEffect(()=>{S(t)},[t]),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("h3",{className:"text-3xl font-bold",children:"Contacto"}),e.jsx("div",{className:"flex flex-col gap-4",children:e.jsxs("form",{className:"flex flex-col gap-4",encType:"multipart/form-data",onSubmit:D(d),children:[e.jsxs("div",{className:"flex flex-wrap gap-4 overflow-x-auto",children:[e.jsx("input",{type:"text",placeholder:"Titulo",defaultValue:t==null?void 0:t.title,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",...v("contact.title")}),e.jsxs("table",{className:"min-w-full overflow-hidden divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-center text-gray-500 uppercase",children:"Icono"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-center text-gray-500 uppercase",children:"Tipo de enlace"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-center text-gray-500 uppercase",children:"Enlace"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-center text-gray-500 uppercase",children:"Acciones"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p==null?void 0:p.map((l,n)=>{const i=P+n;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"relative flex items-center justify-center h-20 m-auto overflow-hidden w-fit",children:[e.jsxs("label",{htmlFor:`dropzone-file-technicalss-${i}`,className:"flex flex-col items-center justify-center w-full h-20 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center h-20 pt-5 pb-6",children:[e.jsx(V,{size:40}),e.jsx("p",{className:"mb-2 text-sm text-gray-500",children:"Subir icono"})]}),e.jsx("input",{id:`dropzone-file-technicalss-${i}`,type:"file",accept:"image/*",className:"hidden",onChange:o=>c(o,i)})]}),g.length>0&&g[i]?e.jsx("div",{className:"absolute object-contain pointer-events-none w-max-60 h-max-60",children:e.jsx("img",{src:g[i],alt:"imagePreview",className:"w-full h-20 bg-white"})}):e.jsx("div",{className:"absolute object-contain pointer-events-none w-max-60 h-max-60",children:e.jsx("img",{src:l.icon,alt:"imagePreview",className:"w-full h-20 bg-white"})})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("select",{defaultValue:l.type_link,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",...v(x({sectionIndex:i,fieldName:"type_link"})),children:[e.jsx("option",{value:"",disabled:!0,children:"Tipo de enlace"}),e.jsx("option",{value:"email",children:"Email"}),e.jsx("option",{value:"social",children:"Red Social"}),e.jsx("option",{value:"tel",children:"Teléfono"}),e.jsx("option",{value:"whatsapp",children:"Whatsapp"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("input",{type:"text",placeholder:"Enlace",defaultValue:l.link,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",...v(x({sectionIndex:i,fieldName:"link"}))})}),e.jsx("td",{className:"px-6 py-4 text-center whitespace-nowrap",children:e.jsx("button",{type:"button",className:"cursor-pointer",onClick:()=>E(l._id),children:e.jsx(R,{size:20,className:"transition-all duration-300 hover:text-red-500"})})})]},i)})})]})]}),e.jsx(U,{current:f,total:h,onPageChange:w}),e.jsxs("div",{className:"flex justify-center p-3 mb-4 transition-all duration-300 bg-gray-100 rounded-md shadow-md w-fit gap-y-2 gap-x-8 hover:bg-gray-200",children:[e.jsxs("div",{className:"relative flex items-center justify-center overflow-hidden h-fit",children:[e.jsxs("label",{htmlFor:"dropzone-file-technical-new",className:"flex flex-col items-center justify-center w-full border-2 border-gray-300 border-dashed rounded-lg cursor-pointer h-36 bg-gray-50 hover:bg-gray-100",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[e.jsx(V,{size:40}),e.jsx("p",{className:"mb-2 text-sm text-gray-500",children:"Subir icono"})]}),e.jsx("input",{id:"dropzone-file-technical-new",type:"file",className:"hidden",accept:"image/*",defaultValue:y.icon,onChange:l=>c(l,t.cards.length)})]}),g[(H=t==null?void 0:t.cards)==null?void 0:H.length]&&e.jsx("div",{className:"absolute object-cover pointer-events-none w-fit h-fit",children:e.jsx("img",{src:g[(O=t==null?void 0:t.cards)==null?void 0:O.length],alt:"imagePreview",className:"w-full h-full bg-white"})})]}),e.jsxs("div",{className:"flex flex-col gap-y-2",children:[e.jsx("input",{type:"text",placeholder:"Tipo de enlace",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",onChange:l=>j({...y,type_link:l.target.value})}),e.jsx("input",{type:"text",placeholder:"Enlace",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",onChange:l=>j({...y,link:l.target.value})})]})]}),e.jsx("button",{className:"px-4 py-2 font-bold text-white transition-all duration-300 bg-blue-500 rounded w-fit hover:bg-blue-700 disabled:bg-gray-400",type:"submit",disabled:b,children:b?e.jsx("l-ring",{size:"19",speed:"2",color:"white",stroke:4}):"Guardar cambios"})]})})]})},X=({dataPage:N,toast:m})=>{const[t,r]=u.useState([]),{handleUpdateFormInputs:I}=L(),{register:v,handleSubmit:D,reset:z}=$(),[S,b]=u.useState(!1),[a,g]=u.useState({label:"",form_field:{inputType:"text",placeHolder:""}}),{currentPage:T,totalPages:y,currentItems:j,indexOfFirstItem:f,handlePageChange:h}=G(Array.isArray(t)?t:[]),p=({sectionIndex:s,fieldName:c})=>`form[${s}].${c}`,P=()=>{g({label:"",form_field:{inputType:"text",placeHolder:""}})},w=async s=>{b(!0);const c=[];console.log(s.form),c.push(...s.form.map((d,E)=>({...d}))),a.label!==""&&a.form_field.inputType&&a.form_field.placeHolder!==""&&c.push(a),console.log(c);try{const{ok:d,response:E}=await I(c);d&&(m.success("Se actualizaron las características con éxito"),b(!1),P(),r(E.data))}catch{m.error("Ocurrió un error al actualizar las características"),b(!1)}},x=async s=>{try{const c=t.filter(d=>d._id!==s);r(c),await w({form:c})}catch{m.error("Ocurrió un error al eliminar la característica")}};return u.useEffect(()=>{r(N.form)},[]),u.useEffect(()=>{z(t)},[t]),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("h3",{className:"text-3xl font-bold",children:"Formulario"}),e.jsx("div",{className:"flex flex-col gap-4",children:e.jsxs("form",{className:"flex flex-col gap-4",onSubmit:D(w),children:[e.jsx("div",{className:"flex flex-wrap gap-4 overflow-x-auto",children:e.jsxs("table",{className:"min-w-full overflow-hidden divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-center text-gray-500 uppercase",children:"Label"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-center text-gray-500 uppercase",children:"Tipo de campo"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-center text-gray-500 uppercase",children:"Placeholder de campo"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:j==null?void 0:j.map((s,c)=>{const d=f+c;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("input",{type:"text",placeholder:"Label",defaultValue:s.label,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",...v(p({sectionIndex:d,fieldName:"label"}))})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("select",{className:"w-full bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5",defaultValue:s.form_field.inputType,...v(p({sectionIndex:d,fieldName:"form_field.inputType"})),children:[e.jsx("option",{value:"default",disabled:!0,children:"Seleccione un tipo de proyecto"}),e.jsx("option",{value:"text",children:"Texto"}),e.jsx("option",{value:"number",children:"Número"}),e.jsx("option",{value:"email",children:"Email"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("input",{type:"text",placeholder:"Placeholder del campo",defaultValue:s.form_field.placeHolder,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",...v(p({sectionIndex:d,fieldName:"form_field.placeHolder"}))})}),e.jsx("td",{className:"px-6 py-4 text-center whitespace-nowrap",children:e.jsx("button",{type:"button",className:"cursor-pointer",onClick:()=>x(s._id),children:e.jsx(R,{size:20,className:"transition-all duration-300 hover:text-red-500"})})})]},d)})})]})}),e.jsx(U,{current:T,total:y,onPageChange:h}),e.jsx("div",{className:"flex justify-center p-3 mb-4 transition-all duration-300 bg-gray-100 rounded-md shadow-md w-fit gap-y-2 gap-x-8 hover:bg-gray-200",children:e.jsxs("div",{className:"flex flex-col gap-y-2",children:[e.jsx("input",{type:"text",placeholder:"Label",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",value:a.label,onChange:s=>g({...a,label:s.target.value})}),e.jsxs("select",{className:"w-full bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5",onChange:s=>g({...a,form_field:{...a.form_field,inputType:s.target.value}}),value:a.form_field.inputType,children:[e.jsx("option",{value:"default",disabled:!0,children:"Seleccione un tipo de proyecto"}),e.jsx("option",{value:"text",children:"Texto"}),e.jsx("option",{value:"number",children:"Número"}),e.jsx("option",{value:"email",children:"Email"})]}),e.jsx("input",{type:"text",placeholder:"Placeholder del campo",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",value:a.form_field.placeHolder,onChange:s=>g({...a,form_field:{...a.form_field,placeHolder:s.target.value}})})]})}),e.jsx("button",{className:"px-4 py-2 font-bold text-white transition-all duration-300 bg-blue-500 rounded w-fit hover:bg-blue-700 disabled:bg-gray-400",type:"submit",disabled:S,children:S?e.jsx("l-ring",{size:"19",speed:"2",color:"white",stroke:4}):"Guardar cambios"})]})})]})};Q.register();const ee=()=>{const{dataContactPage:N,handleGetData:m}=L(),t=async()=>{try{await m()}catch(r){console.error("Error fetching data:",r)}};return u.useEffect(()=>{t()},[]),Object.keys(N).length===0?e.jsx(W,{}):e.jsxs(e.Fragment,{children:[e.jsx(J,{}),e.jsx("div",{className:"p-4 mt-8 md:ml-64 md:mt-0 ",children:e.jsx("div",{className:"p-4 border-gray-200 rounded-lg",children:e.jsxs("div",{className:"flex flex-col gap-y-16",children:[e.jsx(K,{dataPage:N,toast:A}),e.jsx(M,{dataPage:N,toast:A}),e.jsx(X,{dataPage:N,toast:A})]})})}),e.jsx(q,{})]})};export{ee as default};
