import{i as ue,r as o,a as M,b as pe,j as e,L as ge,B as X,k as fe,Q as j}from"./index-g7zPiIaF.js";import{S as he,A as be}from"./index.esm-s96I5nnh.js";let N;const je=new Uint8Array(16);function Ne(){if(!N&&(N=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!N))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return N(je)}const i=[];for(let t=0;t<256;++t)i.push((t+256).toString(16).slice(1));function ve(t,n=0){return i[t[n+0]]+i[t[n+1]]+i[t[n+2]]+i[t[n+3]]+"-"+i[t[n+4]]+i[t[n+5]]+"-"+i[t[n+6]]+i[t[n+7]]+"-"+i[t[n+8]]+i[t[n+9]]+"-"+i[t[n+10]]+i[t[n+11]]+i[t[n+12]]+i[t[n+13]]+i[t[n+14]]+i[t[n+15]]}const ye=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Y={randomUUID:ye};function we(t,n,s){if(Y.randomUUID&&!n&&!t)return Y.randomUUID();t=t||{};const d=t.random||(t.rng||Ne)();if(d[6]=d[6]&15|64,d[8]=d[8]&63|128,n){s=s||0;for(let u=0;u<16;++u)n[s+u]=d[u];return n}return ve(d)}ue.register();const Se=()=>{var _,U,V,E,L,z,C,O,R,$,P,A,G,H,T,B,J,Q,W,q;const[t,n]=o.useState({}),[s,d]=o.useState([]),[u,v]=o.useState(null),[D,y]=o.useState(!1),[S,w]=o.useState(!1),[p,k]=o.useState({name:"",link:""}),[c,h]=o.useState({name:"",link:""}),{register:f,handleSubmit:Z,setValue:ee,reset:te}=M(),{register:x,handleSubmit:ae,reset:le}=M(),{handleGetData:se,handleUpdateDataSection:ne,handleUpdateDataSectionWithImage:ie,dataHomePage:g}=pe(),re=async()=>{try{await se()}catch(a){console.error("Error fetching data:",a)}},m=({sectionIndex:a,fieldName:l})=>`[${a}].${l}`,oe=a=>{const l=a.target.files[0];if(l){const r=new FileReader;r.onloadend=()=>{v(r.result)},r.readAsDataURL(l),ee("logo",l)}},I=async a=>{try{y(!0);const l=new FormData,r={name:p.name,link:p.link},b={...a,logo:a.logo.length>1?a.logo:g.navbar.logo,links:[...a.links.map(K=>({name:K.name,link:K.link}))]};r.name.trim()!==""&&r.link.trim()!==""&&b.links.push(r),l.append("sectionName","navbar"),l.append("newData",JSON.stringify(b)),l.append("image",a.logo||g.navbar.logo);const{ok:xe,response:me}=await ie(l);xe&&(j.success("Datos actualizados correctamente"),v(null),k({name:"",link:""}),n(me.data.navbar),y(!1))}catch{y(!1),j.error("Error al actualizar datos")}},ce=async a=>{const l=t.links.filter(b=>b._id!==a);n({...t,links:l});const r={...t,links:l};await I(r)},F=async a=>{try{w(!0),(c.name!==""&&c.link!==""||c.name.trim()!==""&&c.link.trim()!=="")&&(a[1].links.push({name:c.name,link:c.link}),h({name:"",link:""}));const{ok:l,response:r}=await ne({sectionName:"footer",newData:a});l&&(w(!1),j.success("Datos actualizados correctamente"),h({name:"",link:""}),d(r.data.footer))}catch{w(!1),j.error("Error al actualizar datos")}},de=async a=>{const l=[...s.slice(0,1),{...s[1],links:s[1].links.filter(r=>r._id!==a)},...s.slice(2)];await F(l)};return o.useEffect(()=>{re()},[]),o.useEffect(()=>{Object.keys(g).length>0&&(n(g.navbar),d(g.footer))},[g]),o.useEffect(()=>{te(t)},[t]),o.useEffect(()=>{le(s)},[s]),Object.keys(t).length===0||Object.keys(s).length===0?e.jsx(ge,{}):e.jsxs(e.Fragment,{children:[e.jsx(he,{}),e.jsx("div",{className:"p-4 mt-8 md:ml-64 md:mt-0",children:e.jsx("div",{className:"p-4 border-gray-200 rounded-lg",children:e.jsxs("div",{className:"flex flex-col gap-y-16",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("h3",{className:"text-3xl font-bold",children:"Navbar"}),e.jsx("div",{className:"bg-[#070f26] flex items-center justify-center",children:e.jsxs("div",{className:"flex items-center justify-between w-full gap-2 p-2 px-4",children:[e.jsx("img",{className:"w-40",src:t==null?void 0:t.logo,alt:""}),e.jsx("div",{className:"flex gap-x-4",children:(_=t.links)==null?void 0:_.map(a=>e.jsx("p",{className:"text-sm font-bold text-white",children:a.name},we()))})]})}),e.jsx("div",{className:"flex flex-col gap-4",children:e.jsxs("form",{className:"flex flex-wrap gap-4",encType:"multipart/form-data",onSubmit:Z(I),children:[(U=t==null?void 0:t.links)==null?void 0:U.map((a,l)=>e.jsxs("div",{className:"flex items-center justify-center p-3 mb-4 transition-all duration-300 gap-x-8 bg-slate-100 hover:bg-slate-200 w-52",children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",defaultValue:a.name,className:"w-full bg-transparent",...f(`links.${l}.name`)}),e.jsx("input",{type:"text",defaultValue:a.link,className:"w-full bg-transparent",...f(`links.${l}.link`)})]}),e.jsx("div",{className:"flex gap-4",children:e.jsx("button",{type:"button",className:"cursor-pointer",onClick:()=>ce(a._id),children:e.jsx(X,{size:20,className:"transition-all duration-300 hover:text-red-500"})})})]},l)),e.jsxs("div",{className:"flex flex-col items-center justify-center p-3 mb-4 transition-all duration-300 gap-x-8 bg-slate-100 hover:bg-slate-200 w-52",children:[e.jsx("input",{type:"text",placeholder:"Nuevo nombre",className:"w-full bg-transparent",value:p.name,onChange:a=>k({...p,name:a.target.value})}),e.jsx("input",{type:"text",placeholder:"Nuevo enlace",className:"w-full bg-transparent",value:p.link,onChange:a=>k({...p,link:a.target.value})})]}),e.jsxs("div",{className:"relative flex items-center justify-center w-full",children:[e.jsxs("label",{htmlFor:"dropzone-file",className:"flex flex-col items-center justify-center w-full h-64 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[e.jsx(be,{size:40}),e.jsx("p",{className:"mb-2 text-sm text-gray-500",children:"Sube tu logo"})]}),e.jsx("input",{id:"dropzone-file",type:"file",className:"hidden",accept:"image/*",src:t.logo,...f("logo"),onChange:oe})]}),u?e.jsx("div",{className:"h-full w-[30rem] object-cover absolute pointer-events-none",children:e.jsx("img",{src:u,alt:"imagePreview",className:"w-full h-full bg-white",...f("logo")})}):e.jsx("div",{className:"h-full w-[30rem] object-cover absolute pointer-events-none",children:e.jsx("img",{src:t.logo,alt:"imagePreview",className:"w-full h-full bg-white",...f("logo")})})]}),e.jsx("button",{className:"px-4 py-2 font-bold text-white transition-all duration-300 bg-blue-500 rounded hover:bg-blue-700 disabled:bg-gray-400",type:"submit",disabled:D,children:D?e.jsx("l-ring",{size:"19",speed:"2",color:"white",stroke:4}):"Guardar cambios"}),u&&e.jsx("button",{className:"px-4 py-2 font-bold text-white transition-all duration-300 bg-red-500 rounded hover:bg-red-700",type:"button",onClick:()=>v(null),children:"Eliminar imagen"})]})})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("h3",{className:"text-3xl font-bold",children:"Footer"}),e.jsx("div",{className:"bg-[#070f26] flex items-center justify-center",children:e.jsxs("div",{className:"grid items-start w-full grid-cols-4 gap-2 p-2 px-4 justify-items-center",children:[e.jsxs("div",{className:"text-white",children:[e.jsx("h3",{className:"text-2xl font-bold",children:(V=s[0])==null?void 0:V.title_1}),e.jsx("p",{children:(E=s[0])==null?void 0:E.text})]}),e.jsxs("div",{className:"text-white",children:[e.jsx("h3",{className:"text-2xl font-bold",children:(L=s[1])==null?void 0:L.title_2}),e.jsx("ul",{className:"text-center",children:(C=(z=s[1])==null?void 0:z.links)==null?void 0:C.map((a,l)=>e.jsx("li",{children:e.jsx("p",{children:a.name})},l))})]}),e.jsxs("div",{className:"text-white",children:[e.jsx("h3",{className:"text-2xl font-bold",children:(O=s[2])==null?void 0:O.title_3}),"ICONOS DE REDES"]}),e.jsxs("div",{className:"text-white",children:[e.jsx("h3",{className:"text-2xl font-bold",children:(R=s[3])==null?void 0:R.title_4}),e.jsx("p",{children:($=s[3])==null?void 0:$.text}),e.jsx("p",{children:(P=s[3])==null?void 0:P.text_2})]})]})}),e.jsx("div",{className:"flex flex-col gap-4",children:e.jsxs("form",{className:"grid items-start grid-cols-4 gap-4",onSubmit:ae(F),children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("input",{type:"text",defaultValue:(A=s[0])==null?void 0:A.title_1,className:"w-full text-2xl font-bold bg-transparent",...x(m({sectionIndex:0,fieldName:"title_1"}))}),e.jsx("textarea",{defaultValue:(G=s[0])==null?void 0:G.text,className:"w-full bg-transparent resize-none h-44",...x(m({sectionIndex:0,fieldName:"text"}))})]}),e.jsxs("div",{className:"flex flex-col gap-y-4",children:[e.jsx("input",{type:"text",defaultValue:(H=s[1])==null?void 0:H.title_2,className:"w-full text-2xl font-bold text-center bg-transparent",...x(m({sectionIndex:1,fieldName:"title_2"}))}),(B=(T=s[1])==null?void 0:T.links)==null?void 0:B.map((a,l)=>e.jsxs("div",{className:"flex items-center justify-center p-3 mb-4 transition-all duration-300 gap-x-8 bg-slate-100 hover:bg-slate-200",children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",defaultValue:a.name,className:"w-full bg-transparent",...x(m({sectionIndex:1,fieldName:`links.${l}.name`}))}),e.jsx("input",{type:"text",defaultValue:a.link,className:"w-full bg-transparent",...x(m({sectionIndex:1,fieldName:`links.${l}.link`}))})]}),e.jsx("div",{className:"flex gap-4",children:e.jsx("button",{type:"button",className:"cursor-pointer",onClick:()=>de(a._id),children:e.jsx(X,{size:20,className:"transition-all duration-300 hover:text-red-500"})})})]},l)),e.jsx("div",{className:"flex items-center justify-center p-3 mb-4 transition-all duration-300 gap-x-8 bg-slate-100 hover:bg-slate-200",children:e.jsxs("div",{children:[e.jsx("input",{type:"text",className:"w-full bg-transparent",placeholder:"Nuevo nombre",value:c.name,onChange:a=>h({...c,name:a.target.value})}),e.jsx("input",{type:"text",className:"w-full bg-transparent",placeholder:"Nuevo enlace",value:c.link,onChange:a=>h({...c,link:a.target.value})})]})})]}),e.jsx("div",{className:"flex flex-col",children:e.jsx("input",{type:"text",defaultValue:(J=s[2])==null?void 0:J.title_3,className:"w-full text-2xl font-bold text-center bg-transparent",...x(m({sectionIndex:2,fieldName:"title_3"}))})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("input",{type:"text",defaultValue:(Q=s[3])==null?void 0:Q.title_4,className:"w-full text-2xl font-bold bg-transparent",...x(m({sectionIndex:3,fieldName:"title_4"}))}),e.jsx("input",{type:"text",defaultValue:(W=s[3])==null?void 0:W.text,className:"w-full bg-transparent",...x(m({sectionIndex:3,fieldName:"text"}))}),e.jsx("input",{type:"text",defaultValue:(q=s[3])==null?void 0:q.text_2,className:"w-full bg-transparent",...x(m({sectionIndex:3,fieldName:"text_2"}))})]}),e.jsx("button",{className:"px-4 py-2 font-bold text-white transition-all duration-300 bg-blue-500 rounded hover:bg-blue-700 w-fit",type:"submit",disabled:S,children:S?e.jsx("l-ring",{size:"19",speed:"2",color:"white",stroke:4}):"Guardar cambios"})]})})]})]})})}),e.jsx(fe,{})]})};export{Se as default};
